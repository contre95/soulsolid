# Soulsolid Environment Variables
# Copy this file to .env and modify values as needed
# All variables use SS_ prefix (e.g., logger.enabled -> SS_LOGGER_ENABLED)
# Note: Colons (:) in YAML paths are replaced with underscores (_) in environment variable names
# Example: import.paths.album:soundtrack -> SS_IMPORT_PATHS_ALBUM_SOUNDTRACK

# ====================
# Core Configuration
# ====================

# Path to music library
SS_LIBRARYPATH="./music_library"

# Path for downloads
SS_DOWNLOADPATH="./downloads"

# SQLite database path
SS_DATABASE_PATH="./library.db"

# Web server port
SS_SERVER_PORT="3535"

# Show Fiber routes (debugging)
SS_SERVER_SHOW_ROUTES="false"

# ====================
# Telegram Configuration
# ====================

# Enable Telegram bot
SS_TELEGRAM_ENABLED="false"

# Telegram bot token (from @BotFather)
SS_TELEGRAM_TOKEN=""

# Bot username (without @)
SS_TELEGRAM_BOT_HANDLE="SoulsolidBot"

# Allowed Telegram users (comma-separated)
SS_TELEGRAM_ALLOWEDUSERS="user1,user2"

# Alternative: Use indexed environment variables for users
# SS_TELEGRAM_ALLOWEDUSERS_0="user1"
# SS_TELEGRAM_ALLOWEDUSERS_1="user2"

# ====================
# Logging Configuration
# ====================

# Enable logging
SS_LOGGER_ENABLED="true"

# Log level: debug, info, warn, error
SS_LOGGER_LEVEL="info"

# Log format: text, json
SS_LOGGER_FORMAT="text"

# Enable HTMX debugging
SS_LOGGER_HTMX_DEBUG="false"

# ====================
# Import Configuration
# ====================

# Move files instead of copying
SS_IMPORT_MOVE="false"

# Always queue imports for review
SS_IMPORT_ALWAYS_QUEUE="false"

# Duplicate handling: skip, queue, replace
SS_IMPORT_DUPLICATES="skip"

# Auto-start directory watcher
SS_IMPORT_AUTO_START_WATCHER="false"

# Allow tracks without artist/album metadata
SS_IMPORT_ALLOW_MISSING_METADATA="true"

# ====================
# Path Templates
# ====================

# Path template for compilations
SS_IMPORT_PATHS_COMPILATIONS="%artistfolder{$albumartist}/%asciify{$album} (%if{$original_year,$original_year,$year})/%asciify{$track $title}"

# Path template for soundtracks
SS_IMPORT_PATHS_ALBUM_SOUNDTRACK="%artistfolder{$albumartist}/%asciify{$album} [OST] (%if{$original_year,$original_year,$year})/%asciify{$track $title}"

# Path template for singles
SS_IMPORT_PATHS_ALBUM_SINGLE="%artistfolder{$albumartist}/%asciify{$album} [Single] (%if{$original_year,$original_year,$year})/%asciify{$track $title}"

# Path template for EPs
SS_IMPORT_PATHS_ALBUM_EP="%artistfolder{$albumartist}/%asciify{$album} [EP] (%if{$original_year,$original_year,$year})/%asciify{$track $title}"

# Default path template
SS_IMPORT_PATHS_DEFAULT_PATH="%artistfolder{$albumartist}/%asciify{$album} (%if{$original_year,$original_year,$year})/%asciify{$track $title}"

# ====================
# Metadata Providers
# ====================

# AcoustID provider
SS_METADATA_PROVIDERS_ACOUSTID_ENABLED="true"
SS_METADATA_PROVIDERS_ACOUSTID_SECRET=""

# Deezer provider
SS_METADATA_PROVIDERS_DEEZER_ENABLED="true"

# Discogs provider
SS_METADATA_PROVIDERS_DISCOGS_ENABLED="true"
SS_METADATA_PROVIDERS_DISCOGS_SECRET=""

# MusicBrainz provider
SS_METADATA_PROVIDERS_MUSICBRAINZ_ENABLED="true"

# ====================
# Lyrics Providers
# ====================

# LRCLib provider
SS_LYRICS_PROVIDERS_LRCLIB_ENABLED="true"
SS_LYRICS_PROVIDERS_LRCLIB_PREFER_SYNCED="false"

# Additional lyrics providers (examples - uncomment and modify as needed)
# SS_LYRICS_PROVIDERS_GENIUS_ENABLED="true"
# SS_LYRICS_PROVIDERS_GENIUS_PREFER_SYNCED="false"
# SS_LYRICS_PROVIDERS_TEKSTOWO_ENABLED="true"
# SS_LYRICS_PROVIDERS_TEKSTOWO_PREFER_SYNCED="false"

# ====================
# Downloader Configuration
# ====================

# Embedded artwork
SS_DOWNLOADERS_ARTWORK_EMBEDDED_ENABLED="true"
SS_DOWNLOADERS_ARTWORK_EMBEDDED_SIZE="1000"
SS_DOWNLOADERS_ARTWORK_EMBEDDED_QUALITY="85"

# Downloader plugins (JSON array)
# Format: [{"name":"...","path":"...","icon":"...","config":{...}}, ...]
SS_DOWNLOADERS_PLUGINS='[
  {
    "name": "deezer",
    "path": "../soulsolid-deemix-plugin/plugin.so",
    "icon": "https://demo2.contre.io/img/deezer.png",
    "config": {
      "arl": "your_deezer_arl_here"
    }
  }
]'

# ====================
# Sync Configuration
# ====================

# Enable device sync
SS_SYNC_ENABLED="true"

# Sync devices (JSON array - required)
# Format: [{"uuid":"...","name":"...","sync_path":"..."}, ...]
SS_SYNC_DEVICES='[
  {"uuid":"8722-166E","name":"iPod","sync_path":"SoulMusic"},
  {"uuid":"ABCD-1234","name":"Walkman","sync_path":"PortableMusic"}
]'

# Note: Indexed environment variables (SS_SYNC_DEVICES_0_UUID, etc.) are no longer supported.

# ====================
# Job Configuration
# ====================

# Enable job logging
SS_JOBS_LOG="true"

# Job log directory
SS_JOBS_LOG_PATH="./logs/jobs"

# Webhooks
SS_JOBS_WEBHOOKS_ENABLED="true"

# Job types for webhooks (comma-separated)
SS_JOBS_WEBHOOKS_JOB_TYPES="directory_import,download_album,dap_sync"

# Alternative: Use indexed environment variables for job types
# SS_JOBS_WEBHOOKS_JOB_TYPES_0="directory_import"
# SS_JOBS_WEBHOOKS_JOB_TYPES_1="download_album"
# SS_JOBS_WEBHOOKS_JOB_TYPES_2="dap_sync"

# Webhook command (can contain shell script)
SS_JOBS_WEBHOOKS_COMMAND=""

# ====================
# Legacy Variables (Backward Compatibility)
# ====================

# These legacy variables are still supported but will be mapped to new SS_ variables
TELEGRAM_TOKEN=""
DISCOGS_API_KEY=""
ACOUSTID_CLIENT_KEY=""

# ====================
# Usage Notes
# ====================

# 1. Array values can be set using:
#    - JSON arrays (required for sync devices): SS_SYNC_DEVICES='[{"uuid":"...","name":"...","sync_path":"..."}]'
#    - JSON arrays (for downloader plugins): SS_DOWNLOADERS_PLUGINS='[{"name":"...","path":"...","config":{...}}]'
#    - Comma-separated strings: SS_TELEGRAM_ALLOWEDUSERS="user1,user2,user3"
#    - Indexed variables: SS_TELEGRAM_ALLOWEDUSERS_0="user1", SS_TELEGRAM_ALLOWEDUSERS_1="user2"

# 2. Environment variables override YAML configuration

# 3. For Docker/Podman, set these variables in your run command:
#    docker run -e SS_LOGGER_ENABLED=false -e SS_TELEGRAM_TOKEN=your_token ...

# 4. For systemd services, add to service file:
#    Environment=SS_LOGGER_ENABLED=true
#    Environment=SS_TELEGRAM_TOKEN=your_token

# 5. To use this file with dotenv:
#    source .env.example
#    go run src/main.go
