<div id="contenido" class="animate__animated animate__fadeIn">
  <div
    id="app-status"
    hx-get="/ui/jobs/active"
    hx-trigger="load, every 5s"
    hx-swap="innerHTML"
    hx-swap-oob="true"
  ></div>
  <div
    class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"
  >
    <h1 class="text-3xl font-bold text-slate-800 dark:text-white">Tags</h1>
    <div class="flex flex-row items-center gap-3">
      <button
        hx-get="/ui/library"
        hx-swap="outerHTML"
        hx-target="#contenido"
        title="Back to Library"
        class="cursor-pointer group inline-flex items-center px-4 py-3 rounded-md text-base font-medium tracking-wider transition-all duration-300 ease-out-expo hover:-translate-y-0.5 bg-purple-500/10 backdrop-blur-md border border-slate-400/30 text-slate-600 dark:text-slate-300 shadow-lg shadow-slate-500/10 hover:shadow-slate-500/20"
      >
        <span class="flex items-center">
          <i class="fas fa-arrow-left mr-2 opacity-80"></i>
          <i class="fas fa-music opacity-80"></i>
        </span>
      </button>
      {{if index .EnabledProviders "musicbrainz"}}
      <button
        type="button"
        hx-get="/ui/tag/edit/{{if .Track.ID}}{{.Track.ID}}{{else}}0{{end}}/search/musicbrainz"
        hx-target="body"
        hx-swap="beforeend"
        class="group inline-flex items-center px-3 py-2 rounded-md text-sm font-medium tracking-wider transition-all duration-300 ease-out-expo hover:-translate-y-0.5 bg-orange-500/10 backdrop-blur-md border border-orange-400/30 text-orange-600 dark:text-orange-300 shadow-lg shadow-orange-500/10 hover:shadow-orange-500/20 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500"
      >
        <img src="/svg/brainz.svg" alt="MusicBrainz" class="w-6 h-6 mr-2" />
        <span class="hidden sm:inline text-base font-bold">MusicBrainz</span>
        <span class="htmx-indicator ml-2">
          <i class="fas fa-spinner fa-spin"></i>
        </span>
      </button>
      {{end}} {{if index .EnabledProviders "discogs"}}
      <button
        type="button"
        hx-get="/ui/tag/edit/{{if .Track.ID}}{{.Track.ID}}{{else}}0{{end}}/search/discogs"
        hx-target="body"
        hx-swap="beforeend"
        class="cursor-pointer group inline-flex items-center px-3 py-2 rounded-md text-base font-medium tracking-wider transition-all duration-300 ease-out-expo hover:-translate-y-0.5 bg-slate-500/10 backdrop-blur-md border border-slate-400/30 text-slate-600 dark:text-slate-300 shadow-lg shadow-slate-500/10 hover:shadow-slate-500/20"
      >
        <img src="/svg/discogs.svg" alt="Discogs" class="w-6 h-6 mr-2" />
        <span class="hidden sm:inline text-base font-bold">Discogs</span>
        <span class="htmx-indicator ml-2">
          <i class="fas fa-spinner fa-spin"></i>
        </span>
      </button>
      {{end}} {{if index .EnabledProviders "deezer"}}
      <button
        type="button"
        hx-get="/ui/tag/edit/{{if .Track.ID}}{{.Track.ID}}{{else}}0{{end}}/search/deezer"
        hx-target="body"
        hx-swap="beforeend"
        class="cursor-pointer group inline-flex items-center px-3 py-2 rounded-md text-base font-medium tracking-wider transition-all duration-300 ease-out-expo hover:-translate-y-0.5 bg-purple-500/10 backdrop-blur-md border border-purple-400/30 text-purple-600 dark:text-purple-300 shadow-lg shadow-purple-500/10 hover:shadow-purple-500/20"
      >
        <img src="/img/deezer.png" alt="Deezer" class="w-6 h-6 mr-2" />
        <span class="hidden sm:inline text-base font-bold">Deezer</span>
        <span class="htmx-indicator ml-2">
          <i class="fas fa-spinner fa-spin"></i>
        </span>
      </button>
      {{end}}
      <button
        type="button"
        hx-get="/ui/tag/edit/{{if .Track.ID}}{{.Track.ID}}{{else}}0{{end}}/fingerprint"
        hx-target="#toast-container"
        hx-swap="beforeend"
        hx-on::after-request="this.disabled=true; this.querySelector('.htmx-indicator').classList.remove('hidden')"
        hx-on::before-request="this.querySelector('.htmx-indicator').classList.add('hidden')"
        class="cursor-pointer group inline-flex items-center px-3 py-2 rounded-md text-base font-medium tracking-wider transition-all duration-300 ease-out-expo hover:-translate-y-0.5 bg-red-500/10 backdrop-blur-md border border-red-400/30 text-red-600 dark:text-red-300 shadow-lg shadow-red-500/10 hover:shadow-red-500/20"
      >
        <svg
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="w-6 h-6 mr-2"
        >
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g
            id="SVGRepo_tracerCarrier"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></g>
          <g id="SVGRepo_iconCarrier">
            <path
              d="M13.1427 20.9999C10.8077 19.5438 9.25254 16.9522 9.25254 13.9968C9.25254 12.4783 10.4833 11.2476 12.0008 11.2476C13.5184 11.2476 14.7491 12.4783 14.7491 13.9968C14.7491 15.5153 15.9798 16.746 17.4974 16.746C19.0149 16.746 20.2457 15.5153 20.2457 13.9968C20.2457 9.44139 16.5544 5.74922 12.0017 5.74922C7.44907 5.74922 3.75781 9.44139 3.75781 13.9968C3.75781 15.0122 3.87145 16.001 4.08038 16.954M8.49027 20.2989C7.23938 18.5138 6.50351 16.3419 6.50351 13.9968C6.50351 10.9599 8.96405 8.49844 11.9992 8.49844C15.0343 8.49844 17.4948 10.9599 17.4948 13.9968M17.7927 19.4806C17.6937 19.4861 17.5966 19.4953 17.4967 19.4953C14.4616 19.4953 12.0011 17.0338 12.0011 13.9969M19.6734 6.47682C17.7993 4.34802 15.0593 3 12.0004 3C8.94141 3 6.20138 4.34802 4.32734 6.47682"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
          </g>
        </svg>
        <span class="hidden sm:inline text-base font-bold">Fingerprint</span>
        <span class="htmx-indicator ml-2">
          <i class="fas fa-spinner fa-spin"></i>
        </span>
      </button>
    </div>
  </div>

  {{if .FetchError}}
  <div class="flex items-center gap-3 flex-wrap mb-6">
    <span
      class="group inline-flex items-center px-2 py-1 rounded-md text-xs font-medium tracking-wider transition-all duration-300 ease-out-expo hover:-translate-y-0.5 bg-gradient-to-r from-violet-500/10 to-orange-500/10 backdrop-blur-md border border-violet-400/30 border-r-orange-400/30 text-violet-600 dark:text-violet-300 dark:border-r-orange-300 shadow-lg shadow-violet-500/10 hover:shadow-violet-500/20"
    >
      <span class="flex items-center">
        <i class="fas fa-exclamation-triangle mr-2 opacity-80"></i>
        <span class="font-semibold">{{.FetchError}}</span>
      </span>
    </span>
  </div>
  {{end}}

  <!-- Tag Editing Form Container -->
  <div>{{template "tag/edit_form" .}}</div>
</div>
