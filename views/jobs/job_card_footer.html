{{ $job := . }}
{{ if $job.Error }}
  <div class="mt-1.5 p-1.5 bg-red-50/80 dark:bg-red-900/30 border border-red-200/60 dark:border-red-800/60 rounded-md text-xs text-red-700 dark:text-red-300 backdrop-blur-sm">
    <strong>Error:</strong> {{ $job.Error }}
  </div>
{{ end }}

{{ if and (ne $job.Metadata nil) (index $job.Metadata "msg") }}
  {{ $stats := index $job.Metadata "stats" }}
  {{ $colorClass := "bg-red-50/80 dark:bg-red-900/30 border border-red-200/60 dark:border-red-800/60 text-red-700 dark:text-red-300" }}
  {{ if eq $job.Status "cancelled" }}
    {{ $colorClass = "bg-gray-50/80 dark:bg-gray-900/30 border border-gray-200/60 dark:border-gray-800/60 text-gray-700 dark:text-gray-300" }}
  {{ else if and (eq $job.Status "completed") $stats (gt $stats.TracksImported 0) }}
    {{ $colorClass = "bg-green-50/80 dark:bg-green-900/30 border border-green-200/60 dark:border-green-800/60 text-green-700 dark:text-green-300" }}
  {{ else if and $stats (gt $stats.TracksImported 0) }}
    {{ $colorClass = "bg-yellow-50/80 dark:bg-yellow-900/30 border border-yellow-200/60 dark:border-yellow-800/60 text-yellow-700 dark:text-yellow-300" }}
  {{ else if and $stats (gt $stats.Queued 0) (eq $stats.Errors 0) }}
    {{ $colorClass = "bg-purple-50/80 dark:bg-purple-900/30 border border-purple-200/60 dark:border-purple-800/60 text-purple-700 dark:text-purple-300" }}
  {{ end }}
  <div class="mt-1.5 p-1.5 {{ $colorClass }} rounded-md text-xs backdrop-blur-sm">
    {{ index $job.Metadata "msg" }}
  </div>
{{ end }}