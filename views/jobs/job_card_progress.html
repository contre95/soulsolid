{{ $job := . }}
<div class="flex justify-between items-start mb-4 p-2">
  <div>
    <h4 class="text-sm font-semibold text-gray-900 dark:text-white">{{ $job.Name }}</h4>
    <p class="text-xs text-gray-500 dark:text-gray-400">{{ $job.Type }} • {{ $job.CreatedAt.Format "Jan 2, 15:04" }}</p>
  </div>
  <div class="flex items-center space-x-2">
    {{ if eq $job.Status "running" }}
      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
        <div class="w-2 h-2 bg-blue-500 rounded-full mr-1 animate-pulse"></div>
        Running
      </span>
      <button class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-300 dark:hover:bg-red-900/40"
              hx-post="/jobs/{{ $job.ID }}/cancel"
              hx-target="closest .max-w-md"
              hx-swap="outerHTML"
              _="on click add @disabled then add .opacity-50">
        Cancel
      </button>
    {{ else if eq $job.Status "completed" }}
      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
        ✓ Completed
      </span>
    {{ else if eq $job.Status "failed" }}
      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
        ✗ Failed
      </span>
    {{ else if eq $job.Status "pending" }}
      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
        ⏳ Pending
      </span>
      <button class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-300 dark:hover:bg-red-900/40"
              hx-post="/jobs/{{ $job.ID }}/cancel"
              hx-target="closest .max-w-md"
              hx-swap="outerHTML"
              _="on click add @disabled then add .opacity-50">
        Cancel
      </button>
    {{ else if eq $job.Status "cancelled" }}
      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
        ⊘ Cancelled
      </span>
    {{ end }}
  </div>
</div>

<div class="space-y-2">
  <div class="w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700">
    <div class="bg-blue-600 h-2 rounded-full dark:bg-blue-500 transition-all duration-300" 
         style="width: {{ $job.Progress }}%">
    </div>
  </div>
  
  <div class="flex justify-between items-center">
    <p class="text-xs text-gray-600 dark:text-gray-300">{{ $job.Message }}</p>
    <p class="text-xs text-gray-500 dark:text-gray-400">{{ $job.Progress }}%</p>
  </div>
</div>
{{ if $job.Error }}
  <div class="mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-xs text-red-700 dark:text-red-300">
    <strong>Error:</strong> {{ $job.Error }}
  </div>
{{ end }}

